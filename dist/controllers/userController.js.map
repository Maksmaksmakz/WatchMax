{"version":3,"sources":["../../src/controllers/userController.js"],"names":["router","Router","post","req","res","console","log","newUser","name","body","status","energyLevel","position","coordinates","save","err","send","json","message","get","find","users","findById","params","id","user","put","module","exports"],"mappings":"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","file":"userController.js","sourcesContent":["import express from \"express\"\nconst router = express.Router()\nimport bodyParser from \"body-parser\"\n\nimport User from \"../models/user\"\n\n// POST \"api/v1/user\" - Create user\nrouter.post(\"/\", (req, res) => {\n  console.log(\"post request to user\")\n  const newUser = new User()\n  newUser.name = req.body.name\n  newUser.status = req.body.status\n  newUser.energyLevel = req.body.energyLevel\n  newUser.position.coordinates = req.body.position.coordinates\n\n  newUser.save(err => {\n    if(err){\n      res.send(err)\n    }\n    res.json({message: \"User created\"})\n  })\n})\n\n// GET \"api/v1/user\" - Get users\nrouter.get(\"/\", (req, res) => {\n  console.log(\"get request\")\n  User.find({}, (err, users) => {\n    if(err){\n      res.status(500).send(`Couldn get users Error: ${err}`)\n      return\n    }\n    res.json(users)\n  })\n})\n\n// GET \"api/v1/user/status\" - Get users status\nrouter.get(\"/:id/status\", (req, res) => {\n  console.log(\"get request\")\n  User.findById(req.params.id, (err, user) => {\n    if(err){\n      res.status(500).send(`Couldn find user Error: ${err}`)\n      return\n    }\n    res.json(user.status)\n  })\n})\n\n//PUT \"/api/v1/user/position\"\nrouter.put(\"/position\", (req, res) => {\n  console.log(\"put request to user\")\n    User.find({}, (err, users) => {\n      if(err) {\n        res.send(err)\n      }\n      let user = users[0]\n      user.position.coordinates = req.body.coordinates;\n      user.save(err => {\n        if(err){\n          res.send(err)\n        }\n        res.json({ message: \"User updated\" })\n      })\n  })\n})\n\n// PUT \"api/v1/user\" - Update user\nrouter.put(\"/:id\", (req, res) => {\n    User.findById(req.params.id, (err, user) => {\n      if(err) {\n        res.send(err)\n      }\n      user.name = req.body.name\n      user.status = req.body.status\n      user.energyLevel = req.body.energyLevel\n      user.position.coordinates = req.body.position.coordinates\n      user.save(err => {\n        if(err){\n          res.send(err)\n        }\n        res.json({ message: \"User updated\" })\n      })\n    })\n  })\nmodule.exports = router\n"]}